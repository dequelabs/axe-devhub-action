"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var sync_request_1 = __importDefault(require("sync-request"));
var assert_1 = __importDefault(require("assert"));
/** Validate the given `apiKey`. This method is blocking and should not be called unnecessarily. */
var validateApiKey = function (_a) {
    var apiKey = _a.apiKey, serverURL = _a.serverURL;
    (0, assert_1.default)(apiKey, 'API key is required');
    var url = new URL("/api/api-keys/".concat(apiKey, "/validate/axe-devtools-watcher"), serverURL);
    var res = (0, sync_request_1.default)('GET', url.toString(), {
        maxRedirects: 2,
        followRedirects: true,
        maxRetries: 2,
        retry: true,
        retryDelay: 100
    });
    var body = JSON.parse(res.getBody('utf8'));
    if (body.error) {
        throw new Error(body.error);
    }
};
exports.default = validateApiKey;
//# sourceMappingURL=validateApiKey.js.map